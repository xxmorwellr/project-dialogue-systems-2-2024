{"version":3,"file":"createPromiseQueue.js","names":["shiftDeferred","queue","push","value","resolve","shift","length","Promise","createDeferred","promise"],"sources":["../../src/Util/createPromiseQueue.js"],"sourcesContent":["import createDeferred from 'p-defer-es5';\n\nexport default function() {\n  let shiftDeferred;\n  const queue = [];\n\n  const push = value => {\n    if (shiftDeferred) {\n      const { resolve } = shiftDeferred;\n\n      shiftDeferred = null;\n      resolve(value);\n    } else {\n      queue.push(value);\n    }\n  };\n\n  const shift = () => {\n    if (queue.length) {\n      return Promise.resolve(queue.shift());\n    }\n\n    return (shiftDeferred || (shiftDeferred = createDeferred())).promise;\n  };\n\n  return {\n    push,\n    shift\n  };\n}\n"],"mappings":";;;;;;;;;AAAA;;AAEe,oBAAW;EACxB,IAAIA,aAAJ;EACA,IAAMC,KAAK,GAAG,EAAd;;EAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAAAC,KAAK,EAAI;IACpB,IAAIH,aAAJ,EAAmB;MACjB,qBAAoBA,aAApB;MAAA,IAAQI,OAAR,kBAAQA,OAAR;MAEAJ,aAAa,GAAG,IAAhB;MACAI,OAAO,CAACD,KAAD,CAAP;IACD,CALD,MAKO;MACLF,KAAK,CAACC,IAAN,CAAWC,KAAX;IACD;EACF,CATD;;EAWA,IAAME,KAAK,GAAG,SAARA,KAAQ,GAAM;IAClB,IAAIJ,KAAK,CAACK,MAAV,EAAkB;MAChB,OAAOC,OAAO,CAACH,OAAR,CAAgBH,KAAK,CAACI,KAAN,EAAhB,CAAP;IACD;;IAED,OAAO,CAACL,aAAa,KAAKA,aAAa,GAAG,IAAAQ,iBAAA,GAArB,CAAd,EAAsDC,OAA7D;EACD,CAND;;EAQA,OAAO;IACLP,IAAI,EAAJA,IADK;IAELG,KAAK,EAALA;EAFK,CAAP;AAID"}