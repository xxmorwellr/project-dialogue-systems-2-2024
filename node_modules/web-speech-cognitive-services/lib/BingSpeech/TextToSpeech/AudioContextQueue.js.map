{"version":3,"file":"AudioContextQueue.js","names":["ponyfill","consumer","paused","queue","pause","utterance","push","startConsumer","resume","length","AudioContextConsumer","start","splice","stop"],"sources":["../../../src/BingSpeech/TextToSpeech/AudioContextQueue.js"],"sourcesContent":["import AudioContextConsumer from './AudioContextConsumer';\n\nexport default class {\n  constructor(ponyfill) {\n    this.consumer = null;\n    this.paused = false;\n    this.ponyfill = ponyfill;\n    this.queue = [];\n  }\n\n  pause() {\n    this.paused = true;\n    this.consumer && this.consumer.pause();\n  }\n\n  push(utterance) {\n    this.queue.push(utterance);\n    this.startConsumer();\n  }\n\n  resume() {\n    this.paused = false;\n\n    if (this.consumer) {\n      this.consumer.resume();\n    } else {\n      this.startConsumer();\n    }\n  }\n\n  get speaking() {\n    return !!this.consumer;\n  }\n\n  async startConsumer() {\n    while (!this.paused && this.queue.length && !this.consumer) {\n      this.consumer = new AudioContextConsumer();\n      await this.consumer.start(this.queue, this.ponyfill);\n      this.consumer = null;\n    }\n  }\n\n  stop() {\n    this.queue.splice(0);\n    this.consumer && this.consumer.stop();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;;EAGE,kBAAYA,QAAZ,EAAsB;IAAA;IACpB,KAAKC,QAAL,GAAgB,IAAhB;IACA,KAAKC,MAAL,GAAc,KAAd;IACA,KAAKF,QAAL,GAAgBA,QAAhB;IACA,KAAKG,KAAL,GAAa,EAAb;EACD;;;;WAED,iBAAQ;MACN,KAAKD,MAAL,GAAc,IAAd;MACA,KAAKD,QAAL,IAAiB,KAAKA,QAAL,CAAcG,KAAd,EAAjB;IACD;;;WAED,cAAKC,SAAL,EAAgB;MACd,KAAKF,KAAL,CAAWG,IAAX,CAAgBD,SAAhB;MACA,KAAKE,aAAL;IACD;;;WAED,kBAAS;MACP,KAAKL,MAAL,GAAc,KAAd;;MAEA,IAAI,KAAKD,QAAT,EAAmB;QACjB,KAAKA,QAAL,CAAcO,MAAd;MACD,CAFD,MAEO;QACL,KAAKD,aAAL;MACD;IACF;;;SAED,eAAe;MACb,OAAO,CAAC,CAAC,KAAKN,QAAd;IACD;;;;mGAED;QAAA;UAAA;YAAA;cAAA;gBAAA,MACS,CAAC,KAAKC,MAAN,IAAgB,KAAKC,KAAL,CAAWM,MAA3B,IAAqC,CAAC,KAAKR,QADpD;kBAAA;kBAAA;gBAAA;;gBAEI,KAAKA,QAAL,GAAgB,IAAIS,6BAAJ,EAAhB;gBAFJ;gBAAA,OAGU,KAAKT,QAAL,CAAcU,KAAd,CAAoB,KAAKR,KAAzB,EAAgC,KAAKH,QAArC,CAHV;;cAAA;gBAII,KAAKC,QAAL,GAAgB,IAAhB;gBAJJ;gBAAA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;WAQA,gBAAO;MACL,KAAKE,KAAL,CAAWS,MAAX,CAAkB,CAAlB;MACA,KAAKX,QAAL,IAAiB,KAAKA,QAAL,CAAcY,IAAd,EAAjB;IACD"}