{"version":3,"file":"fetchSpeechData.js","names":["DEFAULT_LANGUAGE","DEFAULT_VOICE","SYNTHESIS_URL","fetchSpeechData","authorizationToken","lang","outputFormat","pitch","rate","text","voice","volume","ssml","buildSSML","fetch","headers","Authorization","method","body","res","status","Error","arrayBuffer"],"sources":["../../../src/BingSpeech/TextToSpeech/fetchSpeechData.js"],"sourcesContent":["import buildSSML from './buildSSML';\n\nconst DEFAULT_LANGUAGE = 'en-US';\nconst DEFAULT_VOICE = 'Microsoft Server Speech Text to Speech Voice (en-US, JessaRUS)'\nconst SYNTHESIS_URL = 'https://speech.platform.bing.com/synthesize';\n\nexport default async function fetchSpeechData({\n  authorizationToken,\n  lang = DEFAULT_LANGUAGE,\n  outputFormat,\n  pitch,\n  rate,\n  text,\n  voice = DEFAULT_VOICE,\n  volume\n}) {\n  const ssml = buildSSML({ lang, pitch, rate, text, voice, volume });\n\n  const res = await fetch(SYNTHESIS_URL, {\n    headers: {\n      Authorization: `Bearer ${ authorizationToken }`,\n      'Content-Type': 'application/ssml+xml',\n      'X-Microsoft-OutputFormat': outputFormat\n    },\n    method: 'POST',\n    body: ssml\n  });\n\n  if (res.status !== 200) {\n    throw new Error(`Failed to syntheis speech, server returned ${ res.status }`);\n  }\n\n  return res.arrayBuffer();\n}\n"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA,IAAMA,gBAAgB,GAAG,OAAzB;AACA,IAAMC,aAAa,GAAG,gEAAtB;AACA,IAAMC,aAAa,GAAG,6CAAtB;;SAE8BC,e;;;;;6FAAf;IAAA;;IAAA;MAAA;QAAA;UAAA;YACbC,kBADa,QACbA,kBADa,mBAEbC,IAFa,EAEbA,IAFa,0BAENL,gBAFM,cAGbM,YAHa,QAGbA,YAHa,EAIbC,KAJa,QAIbA,KAJa,EAKbC,IALa,QAKbA,IALa,EAMbC,IANa,QAMbA,IANa,oBAObC,KAPa,EAObA,KAPa,2BAOLT,aAPK,eAQbU,MARa,QAQbA,MARa;YAUPC,IAVO,GAUA,IAAAC,kBAAA,EAAU;cAAER,IAAI,EAAJA,IAAF;cAAQE,KAAK,EAALA,KAAR;cAAeC,IAAI,EAAJA,IAAf;cAAqBC,IAAI,EAAJA,IAArB;cAA2BC,KAAK,EAALA,KAA3B;cAAkCC,MAAM,EAANA;YAAlC,CAAV,CAVA;YAAA;YAAA,OAYKG,KAAK,CAACZ,aAAD,EAAgB;cACrCa,OAAO,EAAE;gBACPC,aAAa,mBAAaZ,kBAAb,CADN;gBAEP,gBAAgB,sBAFT;gBAGP,4BAA4BE;cAHrB,CAD4B;cAMrCW,MAAM,EAAE,MAN6B;cAOrCC,IAAI,EAAEN;YAP+B,CAAhB,CAZV;;UAAA;YAYPO,GAZO;;YAAA,MAsBTA,GAAG,CAACC,MAAJ,KAAe,GAtBN;cAAA;cAAA;YAAA;;YAAA,MAuBL,IAAIC,KAAJ,sDAAyDF,GAAG,CAACC,MAA7D,EAvBK;;UAAA;YAAA,iCA0BND,GAAG,CAACG,WAAJ,EA1BM;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C"}