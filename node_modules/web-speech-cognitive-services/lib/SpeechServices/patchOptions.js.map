{"version":3,"file":"patchOptions.js","names":["shouldWarnOnSubscriptionKey","patchOptions","authorizationToken","credentials","looseEvent","looseEvents","region","subscriptionKey","otherOptions","console","warn","Error","resolveFunctionOrReturnValue","fetchCredentials","customVoiceHostname","speechRecognitionHostname","speechSynthesisHostname","resolvedCredentials"],"sources":["../../src/SpeechServices/patchOptions.js"],"sourcesContent":["import resolveFunctionOrReturnValue from './resolveFunctionOrReturnValue';\n\nlet shouldWarnOnSubscriptionKey = true;\n\nexport default function patchOptions({\n  authorizationToken,\n  credentials,\n  looseEvent,\n  looseEvents,\n  region = 'westus',\n  subscriptionKey,\n  ...otherOptions\n} = {}) {\n  if (typeof looseEvent !== 'undefined') {\n    console.warn('web-speech-cognitive-services: The option \"looseEvent\" should be named as \"looseEvents\".');\n\n    looseEvents = looseEvent;\n  }\n\n  if (!credentials) {\n    if (!authorizationToken && !subscriptionKey) {\n      throw new Error('web-speech-cognitive-services: Credentials must be specified.');\n    } else {\n      console.warn(\n        'web-speech-cognitive-services: We are deprecating authorizationToken, region, and subscriptionKey. Please use credentials instead. The deprecated option will be removed on or after 2020-11-14.'\n      );\n\n      credentials = async () =>\n        authorizationToken\n          ? { authorizationToken: await resolveFunctionOrReturnValue(authorizationToken), region }\n          : { region, subscriptionKey: await resolveFunctionOrReturnValue(subscriptionKey) };\n    }\n  }\n\n  return {\n    ...otherOptions,\n    fetchCredentials: async () => {\n      const {\n        authorizationToken,\n        customVoiceHostname,\n        region,\n        speechRecognitionHostname,\n        speechSynthesisHostname,\n        subscriptionKey\n      } = await resolveFunctionOrReturnValue(credentials);\n\n      if ((!authorizationToken && !subscriptionKey) || (authorizationToken && subscriptionKey)) {\n        throw new Error(\n          'web-speech-cognitive-services: Either \"authorizationToken\" or \"subscriptionKey\" must be provided.'\n        );\n      } else if (!region && !(speechRecognitionHostname && speechSynthesisHostname)) {\n        throw new Error(\n          'web-speech-cognitive-services: Either \"region\" or \"speechRecognitionHostname\" and \"speechSynthesisHostname\" must be set.'\n        );\n      } else if (region && (customVoiceHostname || speechRecognitionHostname || speechSynthesisHostname)) {\n        throw new Error(\n          'web-speech-cognitive-services: Only either \"region\" or \"customVoiceHostname\", \"speechRecognitionHostname\" and \"speechSynthesisHostname\" can be set.'\n        );\n      } else if (authorizationToken) {\n        if (typeof authorizationToken !== 'string') {\n          throw new Error('web-speech-cognitive-services: \"authorizationToken\" must be a string.');\n        }\n      } else if (typeof subscriptionKey !== 'string') {\n        throw new Error('web-speech-cognitive-services: \"subscriptionKey\" must be a string.');\n      }\n\n      if (shouldWarnOnSubscriptionKey && subscriptionKey) {\n        console.warn(\n          'web-speech-cognitive-services: In production environment, subscription key should not be used, authorization token should be used instead.'\n        );\n\n        shouldWarnOnSubscriptionKey = false;\n      }\n\n      const resolvedCredentials = authorizationToken ? { authorizationToken } : { subscriptionKey };\n\n      if (region) {\n        resolvedCredentials.region = region;\n      } else {\n        resolvedCredentials.customVoiceHostname = customVoiceHostname;\n        resolvedCredentials.speechRecognitionHostname = speechRecognitionHostname;\n        resolvedCredentials.speechSynthesisHostname = speechSynthesisHostname;\n      }\n\n      return resolvedCredentials;\n    },\n    looseEvents\n  };\n}\n"],"mappings":"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"}