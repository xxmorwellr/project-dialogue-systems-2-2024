{"version":3,"file":"fetchCustomVoices.js","names":["fetchCustomVoices","customVoiceHostname","deploymentId","region","subscriptionKey","hostname","fetch","encodeURI","encodeURIComponent","headers","accept","res","ok","Error","json","models","map","gender","properties","Gender","lang","locale","voiceURI","name","SpeechSynthesisVoice","sort","x","y"],"sources":["../../../src/SpeechServices/TextToSpeech/fetchCustomVoices.js"],"sourcesContent":["/* eslint no-magic-numbers: [\"error\", { \"ignore\": [0, 1, -1] }] */\n\nimport SpeechSynthesisVoice from './SpeechSynthesisVoice';\n\nasync function fetchCustomVoices({ customVoiceHostname, deploymentId, region, subscriptionKey }) {\n  const hostname = customVoiceHostname || `${ region }.customvoice.api.speech.microsoft.com`;\n\n  // Although encodeURI on a hostname doesn't work as expected for hostname, at least, it will fail peacefully.\n  const res = await fetch(\n    `https://${ encodeURI(hostname) }/api/texttospeech/v2.0/endpoints/${ encodeURIComponent(deploymentId) }`,\n    {\n      headers: {\n        accept: 'application/json',\n        'ocp-apim-subscription-key': subscriptionKey\n      }\n    }\n  );\n\n  if (!res.ok) {\n    throw new Error('Failed to fetch custom voices');\n  }\n\n  return res.json();\n}\n\nexport default async function({ customVoiceHostname, deploymentId, region, subscriptionKey }) {\n  const { models } = await fetchCustomVoices({ customVoiceHostname, deploymentId, region, subscriptionKey });\n\n  return models\n    .map(\n      ({ properties: { Gender: gender }, locale: lang, name: voiceURI }) =>\n        new SpeechSynthesisVoice({ gender, lang, voiceURI })\n    )\n    .sort(({ name: x }, { name: y }) => (x > y ? 1 : x < y ? -1 : 0));\n}\n"],"mappings":";;;;;;;;;;;;;AAEA;;AAFA;SAIeA,iB;;;;;+FAAf;IAAA;IAAA;MAAA;QAAA;UAAA;YAAmCC,mBAAnC,QAAmCA,mBAAnC,EAAwDC,YAAxD,QAAwDA,YAAxD,EAAsEC,MAAtE,QAAsEA,MAAtE,EAA8EC,eAA9E,QAA8EA,eAA9E;YACQC,QADR,GACmBJ,mBAAmB,cAAQE,MAAR,0CADtC,EAGE;;YAHF;YAAA,OAIoBG,KAAK,mBACTC,SAAS,CAACF,QAAD,CADA,8CACgDG,kBAAkB,CAACN,YAAD,CADlE,GAErB;cACEO,OAAO,EAAE;gBACPC,MAAM,EAAE,kBADD;gBAEP,6BAA6BN;cAFtB;YADX,CAFqB,CAJzB;;UAAA;YAIQO,GAJR;;YAAA,IAcOA,GAAG,CAACC,EAdX;cAAA;cAAA;YAAA;;YAAA,MAeU,IAAIC,KAAJ,CAAU,+BAAV,CAfV;;UAAA;YAAA,iCAkBSF,GAAG,CAACG,IAAJ,EAlBT;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C;;;;;;;;;kFAqBe;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAiBb,mBAAjB,SAAiBA,mBAAjB,EAAsCC,YAAtC,SAAsCA,YAAtC,EAAoDC,MAApD,SAAoDA,MAApD,EAA4DC,eAA5D,SAA4DA,eAA5D;YAAA;YAAA,OACYJ,iBAAiB,CAAC;cAAEC,mBAAmB,EAAnBA,mBAAF;cAAuBC,YAAY,EAAZA,YAAvB;cAAqCC,MAAM,EAANA,MAArC;cAA6CC,eAAe,EAAfA;YAA7C,CAAD,CAD7B;;UAAA;YAAA;YACLW,MADK,yBACLA,MADK;YAAA,kCAGNA,MAAM,CACVC,GADI,CAEH;cAAA,IAAyBC,MAAzB,SAAGC,UAAH,CAAiBC,MAAjB;cAAA,IAA2CC,IAA3C,SAAmCC,MAAnC;cAAA,IAAuDC,QAAvD,SAAiDC,IAAjD;cAAA,OACE,IAAIC,6BAAJ,CAAyB;gBAAEP,MAAM,EAANA,MAAF;gBAAUG,IAAI,EAAJA,IAAV;gBAAgBE,QAAQ,EAARA;cAAhB,CAAzB,CADF;YAAA,CAFG,EAKJG,IALI,CAKC;cAAA,IAASC,CAAT,SAAGH,IAAH;cAAA,IAAsBI,CAAtB,SAAgBJ,IAAhB;cAAA,OAA+BG,CAAC,GAAGC,CAAJ,GAAQ,CAAR,GAAYD,CAAC,GAAGC,CAAJ,GAAQ,CAAC,CAAT,GAAa,CAAxD;YAAA,CALD,CAHM;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C"}