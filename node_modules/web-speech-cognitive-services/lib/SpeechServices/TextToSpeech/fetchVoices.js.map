{"version":3,"file":"fetchVoices.js","names":["fetchVoices","authorizationToken","region","speechSynthesisHostname","subscriptionKey","hostname","encodeURI","fetch","headers","authorization","res","ok","Error","json","voices","map","gender","Gender","lang","Locale","voiceURI","Name","SpeechSynthesisVoice","sort","x","name","y"],"sources":["../../../src/SpeechServices/TextToSpeech/fetchVoices.js"],"sourcesContent":["/* eslint no-magic-numbers: [\"error\", { \"ignore\": [0, 1, -1] }] */\n\nimport SpeechSynthesisVoice from './SpeechSynthesisVoice';\n\nexport default async function fetchVoices({ authorizationToken, region, speechSynthesisHostname, subscriptionKey }) {\n  // Although encodeURI on a hostname doesn't work as expected for hostname, at least, it will fail peacefully.\n  const hostname = speechSynthesisHostname || `${ encodeURI(region) }.tts.speech.microsoft.com`;\n  const res = await fetch(`https://${ hostname }/cognitiveservices/voices/list`, {\n    headers: {\n      'content-type': 'application/json',\n      ...(authorizationToken\n        ? {\n            authorization: `Bearer ${ authorizationToken }`\n          }\n        : {\n            'Ocp-Apim-Subscription-Key': subscriptionKey\n          })\n    }\n  });\n\n  if (!res.ok) {\n    throw new Error('Failed to fetch voices');\n  }\n\n  const voices = await res.json();\n\n  return voices\n    .map(({ Gender: gender, Locale: lang, Name: voiceURI }) => new SpeechSynthesisVoice({ gender, lang, voiceURI }))\n    .sort(({ name: x }, { name: y }) => (x > y ? 1 : x < y ? -1 : 0));\n}\n"],"mappings":";;;;;;;;;;;;;;;AAEA;;;;;;SAE8BA,W;;;;;yFAAf;IAAA;IAAA;MAAA;QAAA;UAAA;YAA6BC,kBAA7B,QAA6BA,kBAA7B,EAAiDC,MAAjD,QAAiDA,MAAjD,EAAyDC,uBAAzD,QAAyDA,uBAAzD,EAAkFC,eAAlF,QAAkFA,eAAlF;YACb;YACMC,QAFO,GAEIF,uBAAuB,cAAQG,SAAS,CAACJ,MAAD,CAAjB,8BAF3B;YAAA;YAAA,OAGKK,KAAK,mBAAaF,QAAb,qCAAwD;cAC7EG,OAAO;gBACL,gBAAgB;cADX,GAEDP,kBAAkB,GAClB;gBACEQ,aAAa,mBAAaR,kBAAb;cADf,CADkB,GAIlB;gBACE,6BAA6BG;cAD/B,CANC;YADsE,CAAxD,CAHV;;UAAA;YAGPM,GAHO;;YAAA,IAgBRA,GAAG,CAACC,EAhBI;cAAA;cAAA;YAAA;;YAAA,MAiBL,IAAIC,KAAJ,CAAU,wBAAV,CAjBK;;UAAA;YAAA;YAAA,OAoBQF,GAAG,CAACG,IAAJ,EApBR;;UAAA;YAoBPC,MApBO;YAAA,iCAsBNA,MAAM,CACVC,GADI,CACA;cAAA,IAAWC,MAAX,SAAGC,MAAH;cAAA,IAA2BC,IAA3B,SAAmBC,MAAnB;cAAA,IAAuCC,QAAvC,SAAiCC,IAAjC;cAAA,OAAsD,IAAIC,6BAAJ,CAAyB;gBAAEN,MAAM,EAANA,MAAF;gBAAUE,IAAI,EAAJA,IAAV;gBAAgBE,QAAQ,EAARA;cAAhB,CAAzB,CAAtD;YAAA,CADA,EAEJG,IAFI,CAEC;cAAA,IAASC,CAAT,SAAGC,IAAH;cAAA,IAAsBC,CAAtB,SAAgBD,IAAhB;cAAA,OAA+BD,CAAC,GAAGE,CAAJ,GAAQ,CAAR,GAAYF,CAAC,GAAGE,CAAJ,GAAQ,CAAC,CAAT,GAAa,CAAxD;YAAA,CAFD,CAtBM;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C"}